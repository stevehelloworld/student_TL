# 學生出勤系統 - 使用者流程文件

## 目錄
1. [系統角色與權限](#1-系統角色與權限)
2. [登入流程](#2-登入流程)
3. [管理員流程](#3-管理員流程)
4. [教師流程](#4-教師流程)
5. [學生流程](#5-學生流程)
6. [家長流程](#6-家長流程)
7. [通知流程](#7-通知流程)
8. [例外處理](#8-例外處理)

## 1. 系統角色與權限

### 1.1 管理員 (Admin)
- 管理所有系統使用者（學生、教師、家長、其他管理員）
- 管理班級與課程
- 查看所有統計報表
- 系統設定

### 1.2 教師 (Teacher)
- 管理所屬課程
- 記錄學生出勤
- 查看所屬班級報表
- 管理課程教材
- 管理課程公告

### 1.3 學生 (Student)
- 查看個人課表
- 查看出勤記錄
- 申請請假/調課
- 查看課程資料
- 查看課程公告

### 1.4 家長
- 使用學生帳號登入 (無獨立家長帳號)
- 查看子女課表與出勤記錄
- 代子女申請請假/調課
- 接收系統通知

## 2. 登入流程

### 2.1 登入
1. 使用者進入登入頁面
2. 輸入帳號（學號/教職員編號/電子郵件）和密碼
3. 系統驗證憑證與帳號狀態
   - 若帳號狀態為 'pending'：顯示「帳號尚未啟用，請聯繫管理員」
   - 若帳號狀態為 'inactive'：顯示「帳號已停用，請聯繫管理員」
   - 若帳號狀態為 'suspended'：顯示「帳號已停權，請聯繫管理員」
4. 首次登入時強制變更密碼
5. 根據角色導向對應儀表板

### 2.2 忘記密碼
1. 點擊「忘記密碼」
2. 輸入帳號（學號/教職員編號/電子郵件）
3. 系統發送重設密碼連結至註冊電子郵件
4. 點擊連結設定新密碼
5. 使用新密碼登入

> **注意**：若無法自行重設密碼，請聯繫管理員協助處理

## 3. 管理員流程

### 3.1 班級管理
1. 建立/編輯/刪除班級
2. 設定班級基本資訊（名稱、描述、學年度等）
3. 管理班級公告

### 3.2 課程管理
1. 為班級建立多個課程時段
2. 設定課程基本資訊（時間、地點、教師）
3. 管理課程狀態（草稿/已發布/進行中/已完成/已取消）

### 3.3 使用者管理
1. **新增使用者**
   - 填寫基本資料（姓名、角色、聯絡方式等）
   - 系統自動產生初始密碼
   - 設定帳號狀態（預設為 'pending'）
   - 選擇是否發送帳號開通通知
   - 儲存後產生使用者帳號

2. **編輯使用者**
   - 修改基本資料
   - 調整帳號狀態
   - 更新角色與權限
   - 管理所屬班級與課程

3. **帳號啟用/停用**
   - 啟用待啟用帳號
   - 暫停或恢復帳號使用
   - 停權違規帳號

4. **重設密碼**
   - 為使用者重設密碼
   - 設定是否要求使用者下次登入時變更密碼
   - 產生一次性重設連結

5. **學生家長管理**
   - 為學生新增/編輯/刪除家長資料
   - 設定主要聯絡人
   - 管理家長聯絡方式
   - 設定通知偏好

6. **批次匯入**
   - 下載範本檔案
   - 上傳使用者清單
   - 預覽並確認匯入結果
   - 發送帳號開通通知

7. **帳號稽核**
   - 檢視帳號活動記錄
   - 匯出帳號清單
   - 搜尋與篩選使用者

### 3.4 班級管理
1. 建立/編輯班級
   - 設定班級名稱、學年度、學期
   - 設定班級所屬課程時段
   - 設定班級導師
2. 班級學生管理
   - 批次匯入/匯出學生名單
   - 調整學生班級
3. 班級課表管理
   - 設定固定上課時段
   - 管理調課記錄

### 3.5 報表管理
1. 出勤報表
   - 班級出勤統計
   - 學生個人出勤明細
   - 教師授課時數統計
2. 匯出功能
   - 支援 Excel/PDF 格式
   - 自訂匯出欄位
   - 排程自動寄送

### 3.6 通知管理
1. 通知設定
   - 啟用/停用 Line 通知
   - 綁定 Line 官方帳號
   - 設定通知時段
2. 通知範本管理
   - 自訂各類通知內容
   - 設定通知優先級
3. 發送通知
   - 選擇通知對象（個人/班級/全校）
   - 選擇通知方式（站內信/電子郵件/Line）
   - 追蹤通知狀態

## 4. 教師流程

### 4.1 課程管理
1. 查看任教課程清單
2. 管理課程教材
3. 發布課程公告

### 4.2 場次教師安排
1. 排定教師授課
   - 選擇課程場次
   - 指定主要授課教師
   - 設定代課教師（可選）
   - 系統自動檢查教師時間衝突
2. 教師課表查詢
   - 查看教師每週授課時段
   - 查詢教師可用時間
   - 匯出教師授課記錄

### 4.3 出勤記錄
1. 選擇課程場次
2. 標記學生出勤狀態（已到/遲到/早退/缺課/請假）
3. 批次匯入/匯出出勤記錄

### 4.4 教師請假代課
1. 教師請假申請
   - 選擇請假日期與時段
   - 填寫請假事由
   - 系統建議可用代課教師
2. 代課安排
   - 選擇代課教師
   - 系統發送代課通知
   - 代課教師確認

### 4.5 請假審核
1. 查看待審核請假申請
2. 核准/拒絕請假
3. 建議補課時段

### 4.4 學習進度
1. 記錄學生學習狀況
2. 上傳作業評分
3. 填寫學習評語

## 5. 學生流程

### 5.1 個人儀表板
1. 查看本週課表
2. 查看近期出勤狀態
3. 待辦事項提醒

### 5.2 出勤查詢
1. 查看歷史出勤記錄
2. 篩選特定課程/日期
3. 匯出個人出勤報表

### 5.3 請假申請
1. 選擇請假課程場次
2. 填寫請假類別與事由
3. 選擇是否要調課
4. 提交申請
5. 查看申請狀態

### 5.4 調課申請
1. 查看同班級其他時段課程
2. 選擇欲調課的場次
3. 確認調課資訊
4. 提交申請
5. 接收調課結果通知



## 7. 通知流程

### 7.1 出勤通知
- 觸發條件：教師更新出勤狀態
- 接收者：學生、家長
- 內容：課程名稱、日期、出勤狀態

### 7.2 請假通知
- 觸發條件：學生/家長提交請假申請
- 接收者：授課教師
- 內容：學生姓名、課程、請假事由、申請調課時段

### 7.3 調課通知
- 觸發條件：調課申請核准/拒絕
- 接收者：學生、家長、教師
- 內容：原課程資訊、新課程資訊、調課狀態

### 7.4 課程異動通知
- 觸發條件：課程時間/地點變更
- 接收者：相關學生、家長、教師
- 內容：異動前後資訊、異動原因

## 8. 例外處理

### 8.1 請假申請失敗
- 原因：超過申請時限
- 處理：系統顯示錯誤訊息，建議聯繫教師

### 8.2 調課失敗
- 原因：目標課程額滿/時間衝突
- 處理：系統建議其他可選時段

### 8.3 登入失敗
- 原因：帳號/密碼錯誤
- 處理：顯示錯誤訊息，提供重試或重設密碼選項

### 8.4 系統維護
- 處理：顯示維護公告，提供預計恢復時間
